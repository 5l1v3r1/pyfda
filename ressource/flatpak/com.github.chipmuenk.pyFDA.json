{
  "app-id": "com.github.chipmuenk.pyFDA",
  "runtime": "org.kde.Platform",
  "runtime-version": "5.10",
  "sdk": "org.kde.Sdk",
  "command": "pyfdax",
  "finish-args": [
    "--socket=wayland",
	"--socket=x11",
    "--device=dri",
    "--filesystem=xdg-run/dconf", "--filesystem=~/.config/dconf:ro",
    "--talk-name=ca.desrt.dconf", "--env=DCONF_USER_CONFIG_DIR=.config/dconf",
    "--own-name=com.github.chipmuenk.pyFDA",
    "--filesystem=home"
	],
    "rename-icon":"pyfda_icon", /*Image will renamed to match the app-id konvention*/
    "rename-appdata-file": "pyFDA.appdata.xml",
	"rename-desktop-file":"pyFDA.desktop",
    "modules": [
		{
		    "name": "PyQt5",
		    "cleanup": ["/bin/sip", "/include", "/lib/python3.5/site-packages/*.pyi"],
		    "config-opts": ["--disable-static", "--enable-x11"],
		    "buildsystem": "simple",
		    "build-commands": [
		        "python3 configure.py --confirm-license --no-docstrings --assume-shared --no-sip-files --no-qml-plugin --no-tools --no-qsci-api -d ${FLATPAK_DEST}/lib/python3.5/site-packages --sip=${FLATPAK_DEST}/bin/sip --sip-incdir=${FLATPAK_DEST}/include --stubsdir=${FLATPAK_DEST}/lib/python3.5/site-packages --disable=QtSensors --disable=QtWebEngine --disable=QtQuick --disable=QtQml --disable=QtWebChannel --disable=QtWebEngineCore --disable=QWebEngineWidgets --disable=QtQuickWidgets --disable=QtSql --disable=QtXmlPatterns --disable=QtMultimedia --disable=QtMultimediaWidgets --disable=QtLocation --disable=QtDesigner --disable=QtBluetooth --disable=QtWebKit --disable=QtWebKitWidgets --disable=QtNfc --disable=QtPositioning",
		        "make -j $(nproc)",
		        "make install"
		    ],
		    "sources": [{
		        "type": "archive",
		        "url": "https://sourceforge.net/projects/pyqt/files/PyQt5/PyQt-5.10.1/PyQt5_gpl-5.10.1.tar.gz",
		        "sha256": "9932e971e825ece4ea08f84ad95017837fa8f3f29c6b0496985fa1093661e9ef"
		    }],
		    "modules": [{
		        "name": "sip",
		        "buildsystem": "simple",
		        "build-commands": [
		            "python3 configure.py -b ${FLATPAK_DEST}/bin -d ${FLATPAK_DEST}/lib/python3.5/site-packages -e ${FLATPAK_DEST}/include -v ${FLATPAK_DEST}/share/sip --stubsdir=${FLATPAK_DEST}/lib/python3.5/site-packages",
		            "make",
		            "make install"
		        ],
		        "sources": [{
		            "type": "archive",
		            "url": "https://sourceforge.net/projects/pyqt/files/sip/sip-4.19.8/sip-4.19.8.tar.gz",
		            "sha256": "7eaf7a2ea7d4d38a56dd6d2506574464bddf7cf284c960801679942377c297bc"
		        }]
		    }]
		},
		{
			"name": "numpy",
			"buildsystem": "simple",
			"build-commands": [
				"pip3 install --prefix=/app --no-deps numpy-1.16.3-cp35-cp35m-manylinux1_x86_64.whl"
			],
			"sources": [
				{
					"type": "file",
					"url": "https://files.pythonhosted.org/packages/f6/f3/cc6c6745347c1e997cc3e58390584a250b8e22b6dfc45414a7d69a3df016/numpy-1.16.3-cp35-cp35m-manylinux1_x86_64.whl",
					"sha256": "771147e654e8b95eea1293174a94f34e2e77d5729ad44aefb62fbf8a79747a15"
				}
				
			]
		},
		{
			"name": "six",
			"buildsystem": "simple",
			"build-commands": [
				"pip3 install --prefix=/app --no-deps six-1.12.0-py2.py3-none-any.whl"
			],
			"sources": [
				{
					"type": "file",
					"url": "https://files.pythonhosted.org/packages/73/fb/00a976f728d0d1fecfe898238ce23f502a721c0ac0ecfedb80e0d88c64e9/six-1.12.0-py2.py3-none-any.whl",
					"sha256": "3350809f0555b11f552448330d0b52d5f24c91a322ea4a15ef22629740f3761c"
				}
				
			]
		},
		{
			"name": "cycler",
			"buildsystem": "simple",
			"build-commands": [
				"pip3 install --prefix=/app --no-deps cycler-0.10.0-py2.py3-none-any.whl"
			],
			"sources": [
				{
					"type": "file",
					"url": "https://files.pythonhosted.org/packages/f7/d2/e07d3ebb2bd7af696440ce7e754c59dd546ffe1bbe732c8ab68b9c834e61/cycler-0.10.0-py2.py3-none-any.whl",
					"sha256": "1d8a5ae1ff6c5cf9b93e8811e581232ad8920aeec647c37316ceac982b08cb2d"
				}
				
			]
		},
		{
			"name": "matplotlib",
			"buildsystem": "simple",
			"build-commands": [
				"pip3 install --prefix=/app --no-deps matplotlib-3.0.3-cp35-cp35m-manylinux1_x86_64.whl"
			],
			"sources": [
				{
					"type": "file",
					"url": "https://files.pythonhosted.org/packages/89/61/465fb3bfba684b0f53b5c4829c3c89e86e6fe9fdcdfda93e38f1788090f0/matplotlib-3.0.3-cp35-cp35m-manylinux1_x86_64.whl",
					"sha256": "63e498067d32d627111cd1162cae1621f1221f9d4c6a9745dd7233f29de581b6"
				}
				
			]
		},
		{
			"name": "docutils",
			"buildsystem": "simple",
			"build-commands": [
				"pip3 install --prefix=/app --no-deps ."
			],
			"sources": [
				{
					"type": "archive",
					"url": "https://files.pythonhosted.org/packages/84/f4/5771e41fdf52aabebbadecc9381d11dea0fa34e4759b4071244fa094804c/docutils-0.14.tar.gz",
					"sha256": "51e64ef2ebfb29cae1faa133b3710143496eca21c530f3f71424d77687764274"
				}
				
			]
		},
		{
			"name": "xlwt",
			"buildsystem": "simple",
			"build-commands": [
				"pip3 install --prefix=/app --no-deps xlwt-1.3.0-py2.py3-none-any.whl"
			],
			"sources": [
				{
					"type": "file",
					"url": "https://files.pythonhosted.org/packages/44/48/def306413b25c3d01753603b1a222a011b8621aed27cd7f89cbc27e6b0f4/xlwt-1.3.0-py2.py3-none-any.whl",
					"sha256": "a082260524678ba48a297d922cc385f58278b8aa68741596a87de01a9c628b2e"
				}
				
			]
		},
		{
			"name": "scipy",
			"buildsystem": "simple",
			"build-commands": [
				"pip3 install --prefix=/app --no-deps scipy-1.2.1-cp35-cp35m-manylinux1_x86_64.whl"
			],
			"sources": [
				{
					"type": "file",
					"url": "https://files.pythonhosted.org/packages/f0/30/526bee2ce18c066f9ff13ba89603f6c2b96c9fd406b57a21a7ba14bf5679/scipy-1.2.1-cp35-cp35m-manylinux1_x86_64.whl",
					"sha256": "281a34da34a5e0de42d26aed692ab710141cad9d5d218b20643a9cb538ace976"
				}
				
			]
		},
		{
			"name": "kiwisolver",
			"buildsystem": "simple",
			"build-commands": [
				"pip3 install --prefix=/app --no-deps kiwisolver-1.1.0-cp35-cp35m-manylinux1_x86_64.whl"
			],
			"sources": [
				{
					"type": "file",
					"url": "https://files.pythonhosted.org/packages/ee/18/4cd2e84c6aff0c6a50479118083d20b9e676e5175a913c0ea76d700fc244/kiwisolver-1.1.0-cp35-cp35m-manylinux1_x86_64.whl",
					"sha256": "e3a21a720791712ed721c7b95d433e036134de6f18c77dbe96119eaf7aa08004"
				}
				
			]
		},
		{
			"name": "pyparsing",
			"buildsystem": "simple",
			"build-commands": [
				"pip3 install --prefix=/app --no-deps pyparsing-2.4.0-py2.py3-none-any.whl"
			],
			"sources": [
				{
					"type": "file",
					"url": "https://files.pythonhosted.org/packages/dd/d9/3ec19e966301a6e25769976999bd7bbe552016f0d32b577dc9d63d2e0c49/pyparsing-2.4.0-py2.py3-none-any.whl",
					"sha256": "9b6323ef4ab914af344ba97510e966d64ba91055d6b9afa6b30799340e89cc03"
				}
				
			]
		},
		{
			"name": "python-dateutil",
			"buildsystem": "simple",
			"build-commands": [
				"pip3 install --prefix=/app --no-deps python_dateutil-2.8.0-py2.py3-none-any.whl"
			],
			"sources": [
				{
					"type": "file",
					"url": "https://files.pythonhosted.org/packages/41/17/c62faccbfbd163c7f57f3844689e3a78bae1f403648a6afb1d0866d87fbb/python_dateutil-2.8.0-py2.py3-none-any.whl",
					"sha256": "7e6584c74aeed623791615e26efd690f29817a27c73085b78e4bad02493df2fb"
				}
				
			]
		},
		{
			"name": "pyFDA",
			"buildsystem": "simple",
			"build-commands": [
				"python3 setup.py install --prefix=/app",
				"desktop-file-install --dir=/app/share/applications ressource/mime/applications/pyFDA.desktop",
				"install -Dm755 ressource/pyFDA.appdata.xml /app/share/appdata/pyFDA.appdata.xml",
				"install -Dm755 docs/source/img/pyfda_icon.png /app/share/icons/hicolor/100x100/apps/pyfda_icon.png",
				"install -Dm755 docs/source/img/pyfda_icon.svg /app/share/icons/hicolor/scalable/apps/pyfda_icon.svg"
			],
			"sources": [
				{
					"type": "git",
					"tag": "v0.1.5",
					"url": "https://github.com/chipmuenk/pyFDA.git"
				}
			]
		}
	]
}
